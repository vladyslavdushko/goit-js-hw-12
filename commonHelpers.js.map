{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\naxios.defaults.baseURL = 'https://pixabay.com/api/';\n\nconst searchDefaultParam = {\n    key: '42291336-b4c9ef387c9d7e209159058e7',\n    image_type: 'photo',\n    orientation: 'horizontal',\n    safesearch: true,\n}\n\nexport const searchPixabay = async (inputValue, page, perPage) => {\n    try {\n        const response = await axios.get(`?`, {\n            params: {\n                q: inputValue,\n                ...searchDefaultParam,\n                page: page,\n                per_page: perPage\n            }\n        });\n        return response.data;\n    } catch (error) {\n        throw error;\n    }\n}\n\n","import SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\nexport const renderPhotos = (data, listOfPhotos) => {\n    data.forEach(element => {\n\n        const markup = `<li class=\"photo\">\n            <a href=\"${element.largeImageURL}\" data-lightbox=\"photos\">\n                <img src=\"${element.webformatURL}\" alt=\"${element.tags}\" title=\"${element.tags}\" class=\"img\">\n            </a>\n            <ul class=\"list\">\n                <li class=\"item\"><h2>Likes <span>${element.likes}</span></h2></li>\n                <li class=\"item\"><h2>Views <span>${element.views}</span></h2></li>\n                <li class=\"item\"><h2>Comments <span>${element.comments}</span></h2></li>\n                <li class=\"item\"><h2>Downloads <span>${element.downloads}</span></h2></li>\n            </ul>\n        </li>`;\n\n        listOfPhotos.insertAdjacentHTML('beforeend', markup);\n\n    });\n    const lightbox = new SimpleLightbox('.photos a', {});\n    lightbox.refresh();\n}","import { searchPixabay } from './js/pixabay-api.js';\nimport { renderPhotos } from './js/render-functions.js';\nimport iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\n\nconst listOfPhotos = document.querySelector('.container ul');\nconst loader = document.querySelector('.loader');\nconst form = document.querySelector('.form');\nconst input = document.querySelector('input');\n\nconst loadMoreBtn = document.createElement('button');\nloadMoreBtn.textContent = \"Load more\";\nloadMoreBtn.style.margin = \"0 auto\";\nloadMoreBtn.style.marginTop = \"15px\";\nloadMoreBtn.style.width = \"150px\";\nloader.after(loadMoreBtn);\nloadMoreBtn.style.display = 'none';\n\nlet inputValue = '';\nlet page = 1;\nconst perPage = 15;\nlet totalPages = 1;\n\nform.addEventListener('submit', async (event) => {\n    event.preventDefault();\n    page = 1;\n    listOfPhotos.innerHTML = '';\n    inputValue = input.value.trim();\n\n    if (!inputValue){\n        iziToast.error({\n            title: 'Error',\n            message: 'Please enter a search term',\n            position: 'topRight'\n        });\n    } else {\n        loader.style.display = 'block';\n        loadMoreBtn.style.display = 'none';\n\n        try {\n            const response = await searchPixabay(inputValue, page, perPage);\n\n            const totalHits = response.totalHits;\n            totalPages = Math.ceil(totalHits / perPage);\n\n            if (totalHits === 0) {\n                iziToast.error({\n                    message: 'Sorry, there are no images matching your search query. Please try again!',\n                    position: \"topRight\",\n                    icon: \"\"\n                });\n            } else {\n                renderPhotos(response.hits, listOfPhotos);\n\n                if (response.hits.length < perPage) {\n                    loadMoreBtn.style.display = 'none';\n                } else {\n                    loadMoreBtn.style.display = 'block';\n                }\n            }\n\n            loader.style.display = 'none';\n\n        } catch (error) {\n            loader.style.display = 'none';\n            console.log(error);\n        }\n    }\n\n    form.reset();\n});\n\nloadMoreBtn.addEventListener('click', async () => {\n    loader.style.display = 'block';\n\n    try {\n        page++;\n        const response = await searchPixabay(inputValue, page, perPage);\n        loader.style.display = 'none';\n        renderPhotos(response.hits, listOfPhotos);\n        const cardHeight = listOfPhotos.firstElementChild.getBoundingClientRect().height;\n        \n        window.scrollBy({\n            top: cardHeight * 3, \n            behavior: 'smooth'\n        });\n\n        const newTotalHits = response.totalHits;\n        totalPages = Math.ceil(newTotalHits / perPage);\n\n        if (page >= totalPages) {\n            loadMoreBtn.style.display = 'none';\n            iziToast.error({\n                position: \"topRight\",\n                message: \"We're sorry, but you've reached the end of search results.\"\n            });\n        }\n    } catch (error) {\n        loader.style.display = 'none';\n        console.log(error);\n    }\n});"],"names":["axios","searchDefaultParam","searchPixabay","inputValue","page","perPage","error","renderPhotos","data","listOfPhotos","element","markup","SimpleLightbox","loader","form","input","loadMoreBtn","totalPages","event","iziToast","response","totalHits","cardHeight","newTotalHits"],"mappings":"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"}